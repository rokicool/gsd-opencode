---
phase: 07-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - gsd-opencode/command/gsd/set-profile.md
autonomous: false

must_haves:
  truths:
    - "After confirming /gsd-set-profile, user is explicitly told that OpenCode must be fully quit + relaunched for model changes to take effect"
    - "User is not told that /new will apply model changes"
  artifacts:
    - path: "gsd-opencode/command/gsd/set-profile.md"
      provides: "Authoritative UX copy for /gsd-set-profile success output"
      contains: "Fully quit and relaunch OpenCode"
  key_links:
    - from: "gsd-opencode/command/gsd/set-profile.md"
      to: "Step 8: Report success"
      via: "Adds restart-required note to the success message"
      pattern: "Report success:"
---

<objective>
Update `/gsd-set-profile` messaging to clearly communicate that model/profile changes require a full OpenCode restart to take effect.

Purpose: Prevent confusion when `opencode.json` is rewritten but the running OpenCode instance continues using cached model/agent configuration.
Output: Updated success/preview copy in `gsd-opencode/command/gsd/set-profile.md` plus a manual verification checkpoint.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/06.1-have-opencode-json-directly-reference-config-json-through-env-variables-rather-than-direct-copy-if-possible/06.1-RESEARCH.md

@gsd-opencode/command/gsd/set-profile.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add explicit restart-required notice to /gsd-set-profile output</name>
  <files>gsd-opencode/command/gsd/set-profile.md</files>
  <action>
    Edit `gsd-opencode/command/gsd/set-profile.md` to add an explicit notice that changes require a full OpenCode restart.

    Apply in BOTH places:
    1) Step 6 "Show preview and confirm" output (so users see it before confirming)
    2) Step 8 "Report success" output (so users see it after confirming)

    Use unambiguous wording. Recommended text:
    - "Note: OpenCode loads `opencode.json` at startup and does not hot-reload model/agent assignments. Fully quit and relaunch OpenCode to apply this profile change."

    Important constraints:
    - Do NOT claim that `/new` applies the change.
    - Keep the existing tables and success formatting intact.
    - Do not change any behavior besides messaging.
  </action>
  <verify>
    - Confirm both "Step 6" and "Step 8" sections include the restart notice (search the file for the notice text).
  </verify>
  <done>
    - The preview text (Step 6) includes an explicit restart-required notice
    - The success text (Step 8) includes an explicit restart-required notice
    - The notice uses "Fully quit and relaunch OpenCode" language
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Updated /gsd-set-profile output to reflect restart requirement</what-built>
  <how-to-verify>
    1) In OpenCode, run `/gsd-set-profile budget` and confirm.
    2) Verify the preview + success output contains the restart-required notice.
    3) Verify the stage/model table still prints correctly.
  </how-to-verify>
  <resume-signal>Type "approved" or paste the output if wording needs adjustment</resume-signal>
</task>

</tasks>

<verification>
- This plan only changes messaging text; no changes to how profiles are applied.
</verification>

<bugs>
- Bug noted during manual verification/UAT: `/gsd-settings` Question-tool menus sometimes render as plain text transcripts (e.g. `# Questions`) and/or print text that looks like it was intended to be UI (e.g. "Next: choose an action...").
- Related: stage override model picker must allow arbitrary model IDs (users may have additional providers like GitHub Copilot).
- Tracked in todo: `.planning/todos/pending/2026-01-22-fix-question-ui-output-in-gsd-settings.md`
</bugs>

<success_criteria>
- Users are explicitly told a full OpenCode restart is required for model changes to take effect.
</success_criteria>

<output>
After completion, create `.planning/phases/07-documentation/07-01-SUMMARY.md`
</output>
